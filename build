case $1 in
	('')
		npm i
		cd functions
		npm i
		tsc
		cd ..
	;;
	('-m'|'--minify')
		./build
		for path in $(find . -not \( -path ./node_modules -prune \) -not \( -path ./functions/node_modules -prune \) -name '*.html')
		do
			node_modules/.bin/html-minifier --collapse-whitespace --remove-comments --remove-optional-tags --remove-redundant-attributes --remove-script-type-attributes --remove-style-link-type-attributes --minify-css true --minify-js true "$path" -o "$path"
		done
		for path in $(find . -not \( -path ./node_modules -prune \) -not \( -path ./functions/node_modules -prune \) -name '*.css')
		do
			node_modules/.bin/cssnano "$path" "$path"
		done
		for path in $(find . -not \( -path ./node_modules -prune \) -not \( -path ./functions/node_modules -prune \) -name '*.js')
		do
			node_modules/.bin/uglifyjs "$path" -o "$path"
		done
	;;
	(*)
		echo Invalid option $1
	;;
esac